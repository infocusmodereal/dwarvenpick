spring:
  application:
    name: dwarvenpick-backend
  jackson:
    default-property-inclusion: non_null

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus
  endpoint:
    health:
      probes:
        enabled: true
    prometheus:
      enabled: ${DWARVENPICK_METRICS_PROMETHEUS_ENABLED:true}
  health:
    ldap:
      enabled: false

server:
  shutdown: graceful
  servlet:
    session:
      cookie:
        http-only: true
        same-site: lax

dwarvenpick:
  query:
    default-page-size: 500
    max-page-size: 1000
    max-buffered-rows: 5000
    max-export-rows: 5000
    max-concurrency-per-user: 5
    result-session-ttl-seconds: 600
    execution-retention-seconds: 3600
    cancel-grace-period-ms: 500
    cleanup-interval-ms: 30000
    shutdown-grace-period-seconds: 15
    history-retention-days: 30
    audit-retention-days: 90
    query-text-redaction-days: 0
    retention-cleanup-interval-ms: 3600000
  security:
    credentials:
      active-key-id: ${DWARVENPICK_CREDENTIAL_ACTIVE_KEY_ID:v1}
      master-key: ${DWARVENPICK_CREDENTIAL_MASTER_KEY:dwarvenpick-dev-master-key-change-me}
  drivers:
    external-dir: ${DWARVENPICK_EXTERNAL_DRIVERS_DIR:/opt/app/drivers}
    maven:
      enabled: ${DWARVENPICK_DRIVERS_MAVEN_ENABLED:true}
      repository-url: ${DWARVENPICK_DRIVERS_MAVEN_REPOSITORY_URL:https://repo1.maven.org/maven2/}
      max-jar-size-mb: ${DWARVENPICK_DRIVERS_MAVEN_MAX_JAR_SIZE_MB:50}
  datasource:
    network-guard:
      enabled: true
      allow-private-networks: true
      allow-host-patterns: []
      deny-host-patterns: []
      allow-cidrs: []
      deny-cidrs: []
  schema:
    cache-ttl-seconds: 300
    max-schemas: 20
    max-tables-per-schema: 100
    max-columns-per-table: 200
  auth:
    local:
      enabled: true
    password-policy:
      min-length: 10
      require-uppercase: true
      require-lowercase: true
      require-digit: true
    ldap:
      enabled: false
      url: ""
      bind-dn: ""
      bind-password: ""
      user-search-base: ""
      user-filter: "(uid={0})"
      attribute-mapping:
        username: uid
        display-name: cn
        email: mail
      group-sync:
        enabled: true
        group-search-base: ""
        group-filter: "(member={0})"
        group-name-attribute: cn
        mapping-rules: {}
      mock:
        enabled: false
        users: []
